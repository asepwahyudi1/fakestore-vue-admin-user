import { defineStore } from 'pinia'
import { ref, watch } from 'vue'
import { getFromStorage, setToStorage } from '@/utils'
import { STORAGE_KEYS } from '@/constants'

const translations = {
  en: {
    home: 'Home',
    products: 'Products',
    cart: 'Cart',
    login: 'Login',
    logout: 'Logout',
    profile: 'Profile',
    admin: 'Admin',
    adminPanel: 'Admin Panel',
    welcome: 'Welcome to FakeStore',
    allCategories: 'All Categories',
    viewDetails: 'View Details',
    addToCart: 'Add to Cart',
    shoppingCart: 'Shopping Cart',
    yourCartIsEmpty: 'Your cart is empty',
    continueShopping: 'Continue Shopping',
    orderSummary: 'Order Summary',
    items: 'Items',
    total: 'Total',
    checkout: 'Checkout',
    confirmCheckout: 'Confirm Checkout',
    checkoutConfirmation: 'Are you sure you want to proceed with checkout?',
    checkoutSuccess: 'Order placed successfully!',
    processingOrder: 'Processing your order...',
    cancel: 'Cancel',
    remove: 'Remove',
    loading: 'Loading...',
    loadingProducts: 'Loading products...',
    loadingProduct: 'Loading product...',
    noProductsFound: 'No products found',
    price: 'Price',
    category: 'Category',
    description: 'Description',
    quantity: 'Quantity',
    email: 'Email',
    username: 'Username',
    password: 'Password',
    firstName: 'First Name',
    lastName: 'Last Name',
    signIn: 'Sign in',
    signUp: 'Sign up',
    createAccount: 'Create account',
    alreadyHaveAccount: 'Already have an account?',
    dontHaveAccount: "Don't have an account?",
    signInToAccount: 'Sign in to your account',
    createYourAccount: 'Create your account',
    viewAllProducts: 'View All Products',
    loadMore: 'Load More',
    loginToViewMore: 'Login to view more',
    searchProducts: 'Search products...',
    search: 'Search',
    searchResults: 'Search Results',
    noSearchResults: 'No products found for',
    similarProducts: 'Similar Products',
    personalInformation: 'Personal Information',
    contactInformation: 'Contact Information',
    address: 'Address',
    phone: 'Phone',
    city: 'City',
    street: 'Street',
    zipcode: 'Zip Code',
    editProfile: 'Edit Profile',
    memberSince: 'Member Since',
    accountType: 'Account Type',
    regularUser: 'Regular User',
    noUserDataAvailable: 'No user data available',
    welcomeSubtitle: 'Discover amazing products at unbeatable prices',
    product: 'product',
    products: 'products',
    productAddedToCart: 'added to cart!',
    pleaseLoginToCheckout: 'Please login to checkout',
    checkoutFailed: 'Checkout failed. Please try again.',
    dashboard: 'Dashboard',
    users: 'Users',
    totalProducts: 'Total Products',
    totalUsers: 'Total Users',
    addProduct: 'Add Product',
    editProduct: 'Edit Product',
    deleteProduct: 'Delete Product',
    addUser: 'Add User',
    editUser: 'Edit User',
    deleteUser: 'Delete User',
    noUsersFound: 'No users found',
    searchUsers: 'Search users...',
    itemsPerPage: 'Items per page:',
    showingUsers: 'Showing {start} to {end} of {total} users',
    showingProducts: 'Showing {start} to {end} of {total} products',
    previous: 'Previous',
    next: 'Next',
    titleRequired: 'Title is required',
    priceRequired: 'Price is required',
    descriptionRequired: 'Description is required',
    categoryRequired: 'Category is required',
    imageUrlRequired: 'Image URL is required',
    enterUsername: 'Enter username',
    enterEmail: 'Enter email',
    enterPassword: 'Enter password',
    newPassword: 'New Password (leave empty to keep current)',
    leavePasswordEmpty: 'Leave password empty to keep the current password',
    update: 'Update',
    create: 'Create',
    confirmDelete: 'Are you sure you want to delete',
    delete: 'Delete',
    backToHome: 'Back to Home',
    user: 'User',
    actions: 'Actions',
    title: 'Title',
    image: 'Image',
    id: 'ID',
    manageProducts: 'Manage Products',
    enterProductTitle: 'Enter product title',
    enterProductPrice: 'Enter product price',
    enterProductDescription: 'Enter product description',
    enterProductCategory: 'Enter product category',
    enterImageUrl: 'Enter image URL',
    productUpdatedSuccessfully: 'Product updated successfully!',
    productCreatedSuccessfully: 'Product created successfully!',
    productDeletedSuccessfully: 'Product deleted successfully!',
    pleaseFillRequiredFields: 'Please fill in all required fields correctly.',
    manageUsers: 'Manage Users',
    removeItem: 'Remove item',
    loadingUsers: 'Loading users...',
    userDeletedSuccessfully: 'User deleted successfully!',
    userUpdatedSuccessfully: 'User updated successfully!',
    userCreatedSuccessfully: 'User created successfully!',
    usernameRequired: 'Username is required',
    emailRequired: 'Email is required',
    validEmail: 'Please enter a valid email',
    passwordRequired: 'Password is required',
    loginSuccess: 'Login successful!',
    loginFailed: 'Login failed. Please try again.',
    enterYourUsername: 'Enter your username',
    enterYourPassword: 'Enter your password',
  },
  id: {
    home: 'Beranda',
    products: 'Produk',
    cart: 'Keranjang',
    login: 'Masuk',
    logout: 'Keluar',
    profile: 'Profil',
    admin: 'Admin',
    adminPanel: 'Panel Admin',
    welcome: 'Selamat Datang di FakeStore',
    allCategories: 'Semua Kategori',
    viewDetails: 'Lihat Detail',
    addToCart: 'Tambah ke Keranjang',
    shoppingCart: 'Keranjang Belanja',
    yourCartIsEmpty: 'Keranjang Anda kosong',
    continueShopping: 'Lanjutkan Belanja',
    orderSummary: 'Ringkasan Pesanan',
    items: 'Item',
    total: 'Total',
    checkout: 'Checkout',
    confirmCheckout: 'Konfirmasi Checkout',
    checkoutConfirmation: 'Apakah Anda yakin ingin melanjutkan checkout?',
    checkoutSuccess: 'Pesanan berhasil dibuat!',
    processingOrder: 'Memproses pesanan Anda...',
    cancel: 'Batal',
    remove: 'Hapus',
    loading: 'Memuat...',
    loadingProducts: 'Memuat produk...',
    loadingProduct: 'Memuat produk...',
    noProductsFound: 'Tidak ada produk ditemukan',
    price: 'Harga',
    category: 'Kategori',
    description: 'Deskripsi',
    quantity: 'Jumlah',
    email: 'Email',
    username: 'Username',
    password: 'Kata Sandi',
    firstName: 'Nama Depan',
    lastName: 'Nama Belakang',
    signIn: 'Masuk',
    signUp: 'Daftar',
    createAccount: 'Buat Akun',
    alreadyHaveAccount: 'Sudah punya akun?',
    dontHaveAccount: 'Belum punya akun?',
    signInToAccount: 'Masuk ke akun Anda',
    createYourAccount: 'Buat akun Anda',
    viewAllProducts: 'Lihat Semua Produk',
    loadMore: 'Lihat Lainnya',
    loginToViewMore: 'Login untuk lihat lainnya',
    searchProducts: 'Cari produk...',
    search: 'Cari',
    searchResults: 'Hasil Pencarian',
    noSearchResults: 'Tidak ada produk ditemukan untuk',
    similarProducts: 'Produk Serupa',
    personalInformation: 'Informasi Pribadi',
    contactInformation: 'Informasi Kontak',
    address: 'Alamat',
    phone: 'Telepon',
    city: 'Kota',
    street: 'Jalan',
    zipcode: 'Kode Pos',
    editProfile: 'Edit Profil',
    memberSince: 'Anggota Sejak',
    accountType: 'Tipe Akun',
    regularUser: 'Pengguna Biasa',
    noUserDataAvailable: 'Tidak ada data pengguna tersedia',
    welcomeSubtitle: 'Temukan produk menakjubkan dengan harga terbaik',
    product: 'produk',
    products: 'produk',
    productAddedToCart: 'ditambahkan ke keranjang!',
    pleaseLoginToCheckout: 'Silakan login untuk checkout',
    checkoutFailed: 'Checkout gagal. Silakan coba lagi.',
    dashboard: 'Dashboard',
    users: 'Pengguna',
    totalProducts: 'Total Produk',
    totalUsers: 'Total Pengguna',
    addProduct: 'Tambah Produk',
    editProduct: 'Edit Produk',
    deleteProduct: 'Hapus Produk',
    addUser: 'Tambah Pengguna',
    editUser: 'Edit Pengguna',
    deleteUser: 'Hapus Pengguna',
    noUsersFound: 'Tidak ada pengguna ditemukan',
    searchUsers: 'Cari pengguna...',
    itemsPerPage: 'Item per halaman:',
    showingUsers: 'Menampilkan {start} sampai {end} dari {total} pengguna',
    showingProducts: 'Menampilkan {start} sampai {end} dari {total} produk',
    previous: 'Sebelumnya',
    next: 'Selanjutnya',
    titleRequired: 'Judul wajib diisi',
    priceRequired: 'Harga wajib diisi',
    descriptionRequired: 'Deskripsi wajib diisi',
    categoryRequired: 'Kategori wajib diisi',
    imageUrlRequired: 'URL gambar wajib diisi',
    enterUsername: 'Masukkan username',
    enterEmail: 'Masukkan email',
    enterPassword: 'Masukkan password',
    newPassword: 'Password Baru (kosongkan untuk tetap menggunakan password saat ini)',
    leavePasswordEmpty: 'Kosongkan password untuk tetap menggunakan password saat ini',
    update: 'Perbarui',
    create: 'Buat',
    confirmDelete: 'Apakah Anda yakin ingin menghapus',
    delete: 'Hapus',
    backToHome: 'Kembali ke Beranda',
    user: 'Pengguna',
    actions: 'Aksi',
    title: 'Judul',
    image: 'Gambar',
    id: 'ID',
    manageProducts: 'Kelola Produk',
    enterProductTitle: 'Masukkan judul produk',
    enterProductPrice: 'Masukkan harga produk',
    enterProductDescription: 'Masukkan deskripsi produk',
    enterProductCategory: 'Masukkan kategori produk',
    enterImageUrl: 'Masukkan URL gambar',
    productUpdatedSuccessfully: 'Produk berhasil diperbarui!',
    productCreatedSuccessfully: 'Produk berhasil dibuat!',
    productDeletedSuccessfully: 'Produk berhasil dihapus!',
    pleaseFillRequiredFields: 'Silakan isi semua field yang wajib dengan benar.',
    manageUsers: 'Kelola Pengguna',
    removeItem: 'Hapus item',
    loadingUsers: 'Memuat pengguna...',
    userDeletedSuccessfully: 'Pengguna berhasil dihapus!',
    userUpdatedSuccessfully: 'Pengguna berhasil diperbarui!',
    userCreatedSuccessfully: 'Pengguna berhasil dibuat!',
    usernameRequired: 'Username wajib diisi',
    emailRequired: 'Email wajib diisi',
    validEmail: 'Silakan masukkan email yang valid',
    passwordRequired: 'Password wajib diisi',
    loginSuccess: 'Login berhasil!',
    loginFailed: 'Login gagal. Silakan coba lagi.',
    enterYourUsername: 'Masukkan username Anda',
    enterYourPassword: 'Masukkan password Anda',
  },
}

export const useI18nStore = defineStore('i18n', () => {
  const locale = ref(getFromStorage(STORAGE_KEYS.LOCALE, 'en'))

  const setLocale = (newLocale) => {
    if (translations[newLocale]) {
      locale.value = newLocale
      setToStorage(STORAGE_KEYS.LOCALE, newLocale)
      document.documentElement.lang = newLocale
    }
  }

  watch(locale, (newLocale) => {
    document.documentElement.lang = newLocale
  })

  const t = (key) => {
    return translations[locale.value]?.[key] || key
  }

  const availableLocales = [
    { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
    { code: 'id', name: 'Indonesia', flag: 'ğŸ‡®ğŸ‡©' },
  ]

  return {
    locale,
    setLocale,
    t,
    availableLocales,
  }
})

